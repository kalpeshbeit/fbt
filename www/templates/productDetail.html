<ion-view view-title="{{'product_detail' | translate}}">
    <ion-nav-bar class="bar-stable">
        <ion-nav-back-button class="button-icon ion-arrow-left-c">
        </ion-nav-back-button>

        <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
            </button>
        </ion-nav-buttons>
        <ion-nav-buttons side="right">
            <a class="button button-icon nav-clear menu-close ion-android-share-alt" ng-click="onShare()"></a>
            <a href="#app/lists" class="button button-icon nav-clear menu-close ion-ios-home-outline"></a>
        </ion-nav-buttons>
    </ion-nav-bar>

    <ion-content class="product-container">
        <!-- product base card -->
        <div class="card padding-horizontal">
            <!-- img swiper -->
            <div class="product-swiper-container">
                <ion-slide-box delegate-handle="image-viewer" show-pager="true">
                    <ion-slide ng-repeat="img in productImg" ng-init="updateSlider()">
                        <img ng-src="{{img.url}}" ng-click="imageFullscreen()"><span></span>
                    </ion-slide>
                </ion-slide-box>
            </div>
            <!-- end img swiper -->
            <!--
            <h4>{{product.name}}</h4>-->

			<!--
          <div class="price-box">
              <span ng-if="product.discount != null" class="special-price">
                  <span class="price">{{product.symbol}}&nbsp;{{totalPrice}}</span>
                  <span class="old-price padding-horizontal">{{oldPrice}}</span>
              </span>
              <span ng-if="product.discount == null" class="special-price">
                  <span class="price">{{product.symbol}}&nbsp;{{oldPrice}}</span>
              </span>
              
              <div ng-if="product.is_in_stock" class="availability in-stock">
                  <span>{{'in_stock' | translate}}</span>
                  <em class="shipping">{{'free_shipping' | translate}}</em>
              </div>
              <div ng-if="!product.is_in_stock" class="availability out-of-stock">
                  <span>{{'out_of_stock' | translate}}</span>
              </div>
              
            </div>
            -->
        </div>        
        <!-- end product base card -->        
        <!-- product option-->
         <div class="col-size">
         	<div class="row">
            	<div class="p_price">                	
                      <span class="p_name">{{product.name}}</span>                  	
                </div>                
                <div class="p_review">
                	<div class="rate-box"><img src="img/star-img.png" height="23" width="143" /></div>
                </div>
            </div>
            <br />
            <div class="row">
            	<div class="p_price">
                	<span ng-if="product.discount != null" class="special-price">
                      <span class="price">{{'SAR' | translate}}{{product.symbol}}{{totalPrice}}</span>
                      <span class="old-price padding-horizontal">{{oldPrice}}</span>
                  	</span>
                  	<span ng-if="product.discount == null" class="special-price">
                      <span class="price">{{'SAR' | translate}}{{product.symbol}}{{oldPrice}}</span>
                  	</span>
                </div>                
                <div class="p_review">
                	<div class="r-box">{{product.total_reviews_count}} {{'Review' | translate}}</div>
                </div>
            </div>
         </div>
        <div class="col-size">
            <div class="color">
                <span class="input-label input-label-pd">{{'Color' | translate}}</span>					
                <ul class="color-ul">
                    <li style="background:{{size.label}}" ng-repeat="size in product.attributeOptions.Color" ng-if="item.value!='N/A' && item.value!='No'">
                        <div>&nbsp;</div>
                    </li>                	
                </ul>
            </div>
            <div style="clear:both"></div>
            <div class="size">
                <span class="input-label input-label-pd">{{'Size' | translate}}</span>
				<ul class="color-ul">
                    <li  style="background:#E5E5E5" ng-repeat="size in product.attributeOptions.Size" ng-if="item.value!='N/A' && item.value!='No'">
                        <div ng-click="change_size('{{size.label}}')">{{size.label}}</div>
                    </li>                	
                </ul>
            </div>
        </div>
        <div class="col-size">
            <form method="post" id="product_addtocart_form">
                <div class="no-none">
                    <input type="hidden" name="product" value="{{product.entity_id}}">
                </div>
                <dl class="list product-option-container">
                          <div class="qty-holder">
                              <div class="item item-input-inset">
                                  <label class="item item-input">
                                      <span class="input-label">{{'quantity' | translate}}</span>
                                      <em class="assertive">*</em>
                                  </label>

                                  <span class="input-number-decrement" ng-click="qtyMinus()">–</span>
                                  <input class="input-number" type="text" name="qty" id="qty"
                                         ng-model="qty" min="1" max="99"
                                         title="Qty">
                                  <span class="input-number-increment" ng-click="qtyAdd()">+</span>
                              </div>
                          </div>
			
                        				
            
            <select name="super_attribute[{{product.productOption[0].attribute_id}}]" id="attribute[{{product.productOption[0].attribute_id}}]" 
            ng-model="myselect1" ng-options="o.label for o in product.attributeOptions.Color track by o.value_index">
		    </select>
            <select name="super_attribute[{{product.productOption[1].attribute_id}}]" id="lblsize" 
            ng-model="myselect" ng-options="o.label for o in product.attributeOptions.Size track by o.value_index">
		    </select>
                        
                        
                        <div ng-repeat="option in productOption" ng-switch on="option.custom_option_type">
                              <!-- field option-->
                        <div class="form__field" ng-switch-when="field">
                            <label class="item item-input">
                                <span class="input-label">
                                    {{option.custom_option_title}}
                                    <em ng-if="option.is_require" class="assertive">*</em>
                                    <em ng-if="option.price > 0">+{{product.symbol}}&nbsp;{{option.price}}</em>
                                </span>
                                <input type="text" class="form__textfield textfield product-custom-option"
                                       name="options[{{option.option_id}}]"
                                       data-price="{{option.price}}">
                            </label>
                        </div>
                        <!--end field option-->

                        <!-- drop_down option-->
                        <div class="form__field" ng-switch-when="drop_down">
                            <label class="item item-input item-select">
                                <div class="input-label">
                                    {{option.custom_option_title}}
                                    <em ng-if="option.is_require==1" class="assertive">*</em>
                                </div>
                                <select name="options[{{option.option_id}}]"
                                        ng-model="_detail"
                                        ng-change="updatePrice()"
                                        class="select-dark product-custom-option validation-failed">
                                    <option value="">-- Please Select --</option>
                                    <option ng-repeat="item in option.custom_option_value"
                                            value="{{item.option_type_id}}" data-price="{{item.price}}">
                                        {{item.title}}&nbsp;
                                        <em ng-if="item.price > 0">+{{product.symbol}}&nbsp;{{item.price}}</em>
                                    </option>
                                </select>
                            </label>
                        </div>
                        <!-- end drop_down option-->

                        <!-- check option-->
                        <div class="form__field" ng-switch-when="checkbox">
                            <label class="item">
                                {{option.custom_option_title}}
                                <em ng-if="option.is_require==1" class="assertive">*</em>
                            </label>
                            <ul class="list padding-left">
                                <li class="item item-checkbox checkbox-dark"
                                    ng-repeat="item in option.custom_option_value">
                                    <label for="options_{{item.option_id}}_{{$index+2}}" class="checkbox">
                                        <input type="checkbox" class="product-custom-option"
                                               ng-click="updatePrice()" name="options[{{item.option_id}}][]"
                                               value="{{item.option_type_id}}" data-price="{{item.price}}">
                                    </label>
                                    {{item.title}}&nbsp;
                                    <em ng-if="item.price > 0">+{{product.symbol}}&nbsp;{{item.price}}</em>
                                </li>
                            </ul>
                        </div>
                        <!--end check option-->

                        <!-- radio option-->
                        <div class="form__field" ng-switch-when="radio">
                            <label class="item item-input">
                                <div class="input-label">
                                    {{option.custom_option_title}}
                                    <em ng-if="option.is_require==1" class="assertive">*</em>
                                </div>
                            </label>

                            <div class="select-options">
                                <input type="hidden" name="options[{{option.option_id}}]"
                                       value="{{selectOptions['custom_option_value' + option.option_id]}}">
                                    <span ng-repeat="item in option.custom_option_value" data-value="{{item.option_type_id}}"
                                          class="{{selectOptions['custom_option_value' +
                                          $parent.option.option_id] === item.option_type_id ? 'selected' : ''}}"
                                          ng-click="selectOption('custom_option_value')"
                                          data-price="{{item.price}}">
                                        {{item.title}}&nbsp;
                                        <em ng-if="item.price > 0">+{{product.symbol}}&nbsp;{{item.price}}</em>
                                  </span>
                            </div>
                        </div>
                        <!--end radio option-->

                        <!-- area option-->
                        <div class="form__field" ng-switch-when="area">
                            <label class="item">
                                <span class="input-label">
                                    {{option.custom_option_title}}
                                    <em ng-if="option.is_require==1" class="assertive">*</em>&nbsp;
                                    <em ng-if="item.price > 0">+{{product.symbol}}&nbsp;{{item.price}}</em>
                                </span>

                                <div class="item">
                                    <textarea  id="options_{{option.option_id}}_text"
                                              class="form__textarea product-custom-option"
                                               name="options[{{option.option_id}}]">
                                    </textarea>
                                </div>
                            </label>
                        </div>
                        <!--end area option-->

                        <!-- Date option-->
                        <div class="form__field" ng-switch-when="date">
                            <label class="item item-input">
                                <span class="input-label">
                                    {{option.custom_option_title}}
                                    <em ng-if="option.is_require" class="assertive">*</em>
                                    <em ng-if="option.price > 0">+{{product.symbol}}&nbsp;{{option.price}}</em>
                                </span>
                                <input type="date" class="form__textfield textfield product-custom-option"
                                       placeholder="yyyy-MM-dd"
                                       name="options[{{option.option_id}}][date]"
                                       data-price="{{option.price}}">
                            </label>
                        </div>
                        <!--end Date option-->

                            <!-- multiple option--,因为不美观，暂时不用
                            <div class="form__field"  ng-switch-when="multiple">
                              <label class="item">{{option.custom_option_title}}</label>
                                  <div class="input-box">
                                    <select name="options[{{option.option_id}}][]" id="select_{{option.option_id}}" class="multiselect product-custom-option" title="" multiple="multiple" onchange="opConfig.reloadPrice()">
                                    <option ng-repeat="item in option.custom_option_value" value="{{item.option_type_id}}" price="{{item.price}}">{{item.title}} +{{product.symbol}}&nbsp;{{item.price}}</option>
                                    </select>
                                  </div>
                            </div>
                            <!--end multiple option-->

                        <div class="item input-box" ng-switch-when="multiple">
                            Multiple option not support, Please use check option
                        </div>
                        <div class="item input-box" ng-switch-when="date_time">
                            DateTime option not support
                        </div>
                        <div class="item input-box" ng-switch-when="time">
                            Time option not support
                        </div>
                        <div class="item input-box" ng-switch-when="file">
                            File option not support
                        </div>
                    </div>
                </dl>
            </form>
        </div>
        <div style="clear:both"></div>
        
        <div class="col-size">
        	<div ng-controller="productDetailCtrl">       
                <div class="">
                	<div class="scroll">            
                    		
	                  <ion-list class="disable-user-behavior">
                      	<div class="list">
                    		<div ng-repeat="group in groups" class="" style="">
                                <ion-item class="item-stable item ng-binding" ng-click="toggleGroup(group)" ng-class="{active: isGroupShown(group)}" style="">
                                <i class="icon ion-plus" ng-class="isGroupShown(group) ? 'ion-minus' : 'ion-plus'" style=""></i>
                                &nbsp;
                                {{'product_description' | translate}}
                                </ion-item>
                                <ion-item class="item-accordion item ng-binding ng-hide" ng-repeat="item in group.items" ng-show="isGroupShown(group)" style="">
                                <div class="list padding-horizontal"  ng-bind-html="product.description | unsafe"></div>
                                </ion-item>                      
                    		</div>
                        	
                            <div ng-repeat="group in groups" class="" style="">
                                <ion-item class="item-stable item ng-binding" ng-click="toggleGroup(1)" ng-class="{active: isGroupShown(1)}" style="">
                                    <i class="icon ion-plus" ng-class="isGroupShown(1) ? 'ion-minus' : 'ion-plus'" style=""></i>
                                    &nbsp;
                                    {{'product_additional' | translate}}
                                </ion-item>
                                <ion-item class="item-accordion item ng-binding ng-hide" ng-repeat="item in group.items" ng-show="isGroupShown(1)" style="">
                                    <div class="row" ng-repeat="item in product.additional" ng-if="item.value!='N/A' && item.value!='No'">
                                    	<div class="col">{{item.label}}:</div>
                                    	<div class="col col-50">{{item.value}}</div>
                                	</div>
                                </ion-item>                      
                    		</div>
                            
						</div>                            
                  	</ion-list>            
                </div>
              </div>
			</div>                
        </div>     
        
        <br />
        <div class="col-size">
        	<br />
            <p class="b_title">{{'customer_who' | translate}}</p>
            <br />
            	<div class="prodlist ">	
        <slick ng-if="lists_new.length" infinite=true 
           slides-to-show=2 
           slides-to-scroll=2>    	           
            <div class="prod_slider slick-item" ng-repeat="product in lists_new">			
                <div class="product-inner">
                <div class="p_lbl"><span class="new-lbl">New</span></div>
            <a href="#app/productDetail/{{product.entity_id}}">
                <div class="product-image">
                    <img image-lazy-src="{{product.image_url}}"
                         lazy-scroll-resize="true"
                         image-lazy-loader="lines">
                </div>
            </a>
            
            <div class="product-info">
                <div class="product-name">
                    {{product.name}}
                </div>
            	<div class="p_rating">
            	<img src="img/star-img.png" height="23" width="143" />
            </div>
                <div  class="product-price">                		
                    <div class="price-box">                    	
                      <span ng-if="product.discount != null" class="special-price">
                          <span class="special-price">
                              <span class="price">
                                  {{product.symbol}}{{product.final_price_with_tax}}
                              </span>
                              &nbsp;
                              <span class="old-price">
                                  {{product.regular_price_with_tax | number:0}}
                              </span>
                          </span>
                      </span>
                      <span ng-if="product.discount == null" class="special-price">
                          <span class="special-price">
                              <span class="price">
                                  {{product.symbol}}{{product.regular_price_with_tax}}
                              </span>
                          </span>
                      </span>
                      <span ng-show="0" ng-if="product.discount!=null" class="discount {{price_percent_class}}">
                          <span class="price">
                              {{product.discount}}
                          </span>
                      </span>
                    </div>
                </div>
                
                <div class="p_footer">
            	<span class="img_left">
            	<img src="img/share-25.png" height="25" width="25" />                
                </span>
                <span class="img_center">
                <img class="" src="img/cart-25.png" height="25" width="25" />
                </span>
                <span class="img_right">
                <img class="" src="img/save-25.png" height="25" width="25" />
                </span>
            </div>
            </div>
            </div>            
            </div>
            </slick> 
        </div>
        <br><br><br>               
	</div>
        <!-- end product option-->
    <!-- product descript-->
    	<!--
        <div class="product-description padding-horizontal">
            <h3>{{'product_description' | translate}}</h3>
            <div class="list padding-horizontal"  ng-bind-html="product.description | unsafe">
            </div>
            <h3>{{'product_additional' | translate}}</h3>
            <div class="list padding-horizontal">
                <div class="row" ng-repeat="item in product.additional" ng-if="item.value!='N/A' && item.value!='No'">
                    <div class="col">{{item.label}}:</div>
                    <div class="col col-50">{{item.value}}</div>
                </div>
            </div>
        </div> -->
        
        <!-- end product descript-->
	
    
    
    </ion-content>


    <div class="bar bar-footer bar-stable add-to-cart">
    <a class="add-to-cart-left button button-outline button-assertive ion-android-cart" href="#app/cart">
      &nbsp;{{items_qty}}</a>
    <button class="button add-to-cart-right button-assertive" type="submit" ng-click="doCartAdd()">
      {{'add_to_cart' | translate}}
    </button>
    </div>
</ion-view>
